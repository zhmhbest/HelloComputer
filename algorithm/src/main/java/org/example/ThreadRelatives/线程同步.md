# 线程同步

## 线程安全

- 原子性：同一时刻只能有一个线程对数据进行操作（`Atomic`、`synchronized`）
- 可见性：线程对主内存的修改可以及时地被其他线程看到（`synchronized`、`volatile`）
- 有序性：一个线程观察其他线程中的指令执行顺序，由于指令重排序，该观察结果一般杂乱无序

## `synchronized`、`volatile`、`Atomic`

>[`ˈsɪŋkrənaɪzd`](http://dict.youdao.com/dictvoice?type=0&audio=synchronized)、[`ˈvɒlətaɪl`](http://dict.youdao.com/dictvoice?type=0&audio=volatile)

### volatile

当前变量在寄存器（工作内存）中的值是不确定的，需要从主存中读取。

仅能实现原始变量（`boolean`、 `short` 、`int` 、`long`）的修改可见性，不能保证原子性。

标记的变量不会被编译器优化。

### synchronized

锁定当前变量，只有当前线程可以访问该变量，其他线程被阻塞住。

可以保证变量的修改可见性和原子性。

可能会造成线程的阻塞。

### Atomic

当有多个线程同时对单个（基本类型或引用类型）变量进行操作时，具有排他性，即当多个线程同时对该变量的值进行更新时，仅有一个线程能成功，而未成功的线程可以像自旋锁一样，继续尝试，一直等到执行成功。

## 线程同步实现方法

使用 Synchronized 关键字； 
wait 和 notify； 
使用特殊域变量 volatile 实现线程同步； 
使用可重入锁实现线程同步； 
使用阻塞队列实现线程同步； 
使用信号量 Semaphore。